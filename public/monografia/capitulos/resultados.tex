\chapter{Resultados}

Neste capítulo, as seções foram subdivididas para melhorar o desenvolvimento da escrita da monografia. A divisão é a seguinte: a seção \ref{sec:Simplificando_trabalho} relembra as atividades relacionadas ao problema que o sistema visa melhorar, destacando a definição do escopo que foi implementado na versão inicial.

\section{Simplificação da proposta do trabalho}
\label{sec:Simplificando_trabalho}

Conforme descrito nas seções anteriores, este trabalho propõe o desenvolvimento de um sistema de ordem de serviço com foco em relatórios e dashboards, conforme indicado na seção \ref{sec:descobrir_problema} - Descobrir um problema, objetivando aprimorar o foco do gestor da V Tornos. Com base nessa análise, foram definidas nas atividades essenciais para criar um sistema inicial, conforme a seção \ref{sec:definir_escolpo} - Definir escopo do projeto, com o intuito de desenvolver um MVP. O interesse que em futuras versões, sejam realizadas atualizações que sigam as métricas estabelecidas na descoberta dos problemas e contemplem melhorias ou o acréscimo de novas atividades relacionadas aos propósitos identificado para desenvolver o sistema.

Com a catalogação da estrutura dos fatos que são salvas nos arquivos Excel dos respetivos clientes. Deu-se origem a base de dados vtornos. Onde é demonstrada inicialmente no capitulo \ref{sec:desenvolver_eer} - Desenvolver EER Workbench. Através dela, criou-se o modelo caso de uso demonstrado \ref{sec:esquematizar_uml}, onde correlacionada como as atividades. 
\section{Banco de dados}
\label{sec:banco_dados}
A utilização de um framework busca manter uma estrutura organizada e incluir ferramentas que contribuem para a agilidade e flexibilidade no desenvolvimento. Para o desenvolvimento do banco de dados, utilizou-se o componente \textbf{php spark db:create}, que gera o banco de dados \textbf{vtornos}. Para assegurar a padronização e evitar erros no banco de dados, o CodeIgniter oferece dois mecanismos: um para documentar a estrutura do banco de dados e outro para orientar as inserções dos dados. A primeira é desenvolvida com a migration que é uma forma de catalogar a estrutura que irá criar as tabelas do banco de dados que ficam armazenada no diretório app/Database/Migrations \cite{b:codeigniter4_2020} .

 Nesse processo, foram desenvolvidas 17 tabelas para a persistência e recuperação das informações, oferecendo uma solução estruturada e de fácil manutenção. Informações adicionais sobre essas tabelas são abordadas nas próximas seções do trabalho. A segunda etapa foca em manter uma estrutura padronizada para as inserções nas tabelas, conhecida como seeder. Basicamente, trata-se de um modelo que define uma classe de inserções para cada tabela específica. Esses seeders estão localizados no diretório app/Database/Seeds. A inserção de dados ocorre através da função run, que recebe todas as informações necessárias para gerar os registros na tabela referenciada.
\input{codigos/layouts_tema_um}
\input{codigos/tema_um}
\section{Criando estrutura Layouts para sistema}
\label{sec:layouts}
A Figura \ref{fig:layouts_tema_um} apresenta a segmentação usada no desenvolvimento das views do sistema, com base na Figura \ref{fig:tema_um}. Essa abordagem tem como objetivo criar um espaço reservado, definido por \$this->renderSection(), que possui três seções: uma para componentes de \textbf{estilo}, dedicada a implementações em CSS; outra para o \textbf{conteúdo}, onde são inseridas as estruturas específicas para criação de formulários, tabelas de listagem ou geração dinâmica de gráficos; e, por último, a seção de \textbf{script}, que conterá códigos específicos em JavaScript.
\section{Sistema de Login}
\label{sec:login}
A Figura \ref{fig:UsuarioModel_orm} ilustra a estrutura básica para a configuração de Object Relational Mapping (ORM) no UsuarioModel. A linha 6 indica o nome da tabela que a classe irá instanciar, seguido pelo nome da chave primária, conforme está implementado no banco de dados. Na linha 9, é especificado que o retorno será no formato de objeto; por padrão, o comando make:model implementa o retorno em tipo array. O \$useSoftDeletes é uma opção para registrar as datas de criação e exclusão de um objeto, permitindo que, na prática, não haja exclusão efetiva na tabela. Para mais detalhes, consulte a documentação oficial \cite{m:codeigniter4.5.4}\footnote{\url{https://codeigniter.com/user_guide/models/model.html#usesoftdeletes}}. Por fim, é importante ressaltar que os atributos serão encapsulado pelo CodeIgniter e a linha 12 especifica quais colunas da tabela devem ser gerenciadas pelo framework nas tarefas essenciais do CRUD.
\input{codigos/UsuarioModel_orm}
Para gerenciar o login e logout, um controlador separado foi desenvolvido, o qual também manipula as informações do usuário. Assim, o UsuarioModel é utilizado tanto no UsuarioController, que manipula diretamente os dados do usuário, quanto no LoginController, que realiza as verificações necessárias para o acesso ao sistema. Essa estratégia garante uma gestão eficiente dos dados do usuário e das funcionalidades de autenticação.

A Figura \ref{fig:UsuarioModel_callbaks} mostra que é possível executar ações antes ou depois de inserir, atualizar, visualizar (usando as funções \textbf{first}, \textbf{find} e \textbf{findAll}) e excluir dados. Nesse contexto, a função hash senha foi desenvolvida para criptografar senhas em duas situações específicas: antes da inserção de um novo registro de usuário e ao atualizar uma senha existente. Além disso, é importante usar métodos nativos do PHP para verificar senhas, utilizando password verify, como ilustrado na linha 13 da Figura \ref{cod:loginController}. Com essa implementação, é possível aplicar um filtro para garantir a proteção necessária. Essa abordagem está documentada \ref{sec:Sprint_login} Sprint 5 - REALIZAR MECANISMO DE LOGIN, que descreve os dois métodos que podem ser implementados, conforme mostrado na Figura \ref{cod:AuthFilter}.
\input{codigos/LoginController_login}
\input{codigos/AuthFilter}
\input{codigos/UsuarioModel_callback}
\section{Módulo para controle de maquinários de ofertas de serviços}
\label{}